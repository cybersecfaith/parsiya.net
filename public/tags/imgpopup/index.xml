<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Imgpopup on Parsia&#39;s Den</title>
    <link>http://parsiya.net/tags/imgpopup/</link>
    <description>Recent content in Imgpopup on Parsia&#39;s Den</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sun, 26 Jul 2015 23:02:58 +0000</lastBuildDate>
    <atom:link href="http://parsiya.net/tags/imgpopup/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Image Popup and Octopress</title>
      <link>http://parsiya.net/blog/2015-07-26-Image-Popup-and-Octopress/</link>
      <pubDate>Sun, 26 Jul 2015 23:02:58 +0000</pubDate>
      
      <guid>http://parsiya.net/blog/2015-07-26-Image-Popup-and-Octopress/</guid>
      <description>&lt;p&gt;Update: I have migrated the blog to Hugo and I do not use this anymore. However, it is still in the repository.&lt;/p&gt;

&lt;p&gt;I finally realized that I need an image popup plugin. The image plugins that I usually use do not support this. They are fine for normal images but not for larger ones. When I see an screenshot of a tool, I want to be able to zoom in. In my quest I looked at a few plugins and methods and finally decided to use &lt;a href=&#34;https://github.com/ctdk/octopress-image-popup&#34; target=&#34;_blank&#34;&gt;https://github.com/ctdk/octopress-image-popup&lt;/a&gt;. It creates resized thumbnails automatically and the installation procedure is short and simple.&lt;/p&gt;

&lt;p&gt;However, it did not work for me out of the box. I created a test post with just an image and while the plugin worked, there are things that I did not like about it.&lt;/p&gt;









&lt;span class=&#34;caption-wrapper&#34;&gt;
  &lt;img class=&#34;caption&#34; src=&#34;http://parsiya.net/images/2015/popup1/pew1.jpg&#34; title=&#34;test post&#34; alt=&#34;test post&#34;&gt;
  &lt;span class=&#34;caption-text&#34;&gt;test post&lt;/span&gt;
&lt;/span&gt;

&lt;p&gt;There is this text &amp;ldquo;Click the image for a larger view.&amp;rdquo; and there is also an unresized copy of the image on the page.&lt;/p&gt;

&lt;p&gt;By inspecting these two elements, we can find the culprits in the page source (comments are mine).&lt;/p&gt;




    

&lt;figure class=&#34;code&#34;&gt;
  &lt;figcaption&gt;
  	&lt;span&gt;page source&lt;/span&gt;
  &lt;/figcaption&gt;
  &lt;div class=&#34;codewrapper&#34;&gt; 
    &lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;td&gt;&lt;div class=&#34;linenodiv&#34; style=&#34;background-color: #f0f0f0; padding-right: 10px&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #002B36&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;...
&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;div&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;class=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;imgpopup screen&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color: #586E75&#34;&gt;&amp;lt;!-- caption --&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;div&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;class=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;caption&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;gt;&lt;/span&gt;Click the image for a larger view.&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;a&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;href=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;javascript:void(0)&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;style=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;text-decoration: none&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;id=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;image-1&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;img&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;src=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;/images/2015/pew.jpg&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;width=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;300&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;height=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;221&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;alt=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;Click me.&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #268BD2&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;

...
&lt;span style=&#34;color: #586E75&#34;&gt;&amp;lt;!-- unresized copy --&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;div&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;class=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;illustration print&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;img&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;src=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;/images/2015/pew.jpg&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;width=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;600&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;height=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;441&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #268BD2&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
  &lt;/div&gt;
&lt;/figure&gt;


&lt;p&gt;During installation we have only copied two files (apart from editing &lt;code&gt;head.html&lt;/code&gt;): &lt;code&gt;img_popup.rb&lt;/code&gt; and &lt;code&gt;img_popup.html.erb&lt;/code&gt;. The html file is probably your first guess to and you are right. Inside we can see html tags (original copy is at &lt;a href=&#34;https://github.com/ctdk/octopress-image-popup/blob/master/plugins/img_popup.html.erb&#34; target=&#34;_blank&#34;&gt;https://github.com/ctdk/octopress-image-popup/blob/master/plugins/img_popup.html.erb&lt;/a&gt;):&lt;/p&gt;

&lt;p&gt;


    

&lt;figure class=&#34;code&#34;&gt;
  &lt;figcaption&gt;
  	&lt;span&gt;img_popup.html.erb&lt;/span&gt;
  &lt;/figcaption&gt;
  &lt;div class=&#34;codewrapper&#34;&gt; 
    &lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;td&gt;&lt;div class=&#34;linenodiv&#34; style=&#34;background-color: #f0f0f0; padding-right: 10px&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #002B36&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;...

&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;div&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;class=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;imgpopup screen&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;div&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;class=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;caption&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;gt;&lt;/span&gt;Click the image for a larger view.&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;a&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;href=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;#39;javascript:void(0)&amp;#39;&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;style=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;text-decoration: none&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;id=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;image-&amp;lt;%= id %&amp;gt;&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;img&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;src=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;&amp;lt;%= scaled_image %&amp;gt;&amp;quot;&lt;/span&gt;
         &lt;span style=&#34;color: #93A1A1&#34;&gt;width=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;&amp;lt;%= scaled_width %&amp;gt;&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;height=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;&amp;lt;%= scaled_height %&amp;gt;&amp;quot;&lt;/span&gt;
         &lt;span style=&#34;color: #93A1A1&#34;&gt;alt=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;Click me.&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #268BD2&#34;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;

...

&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;div&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;class=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;illustration print&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;gt;&lt;/span&gt;
  &lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;img&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;src=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;&amp;lt;%= image %&amp;gt;&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;width=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;&amp;lt;%= full_width %&amp;gt;&amp;quot;&lt;/span&gt; &lt;span style=&#34;color: #93A1A1&#34;&gt;height=&lt;/span&gt;&lt;span style=&#34;color: #2AA198&#34;&gt;&amp;quot;&amp;lt;%= full_height %&amp;gt;&amp;quot;&lt;/span&gt;&lt;span style=&#34;color: #268BD2&#34;&gt;/&amp;gt;&lt;/span&gt;
&lt;span style=&#34;color: #268BD2&#34;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
  &lt;/div&gt;
&lt;/figure&gt;
&lt;/p&gt;

&lt;p&gt;I am not quite sure what this &lt;code&gt;erb&lt;/code&gt; file does but it looks like to be a blueprint for the final html content. We can just remove those parts that we want: the caption and the &amp;ldquo;illustration print&amp;rdquo; class.&lt;/p&gt;

&lt;p&gt;Another problem is after we click on the image. There is no space between image title and the &amp;ldquo;close&amp;rdquo; link.&lt;/p&gt;

&lt;p&gt;







&lt;span class=&#34;caption-wrapper&#34;&gt;
  &lt;img class=&#34;caption&#34; src=&#34;http://parsiya.net/images/2015/popup1/pew2.jpg&#34; title=&#34;pew pew popup&#34; alt=&#34;pew pew popup&#34;&gt;
  &lt;span class=&#34;caption-text&#34;&gt;pew pew popup&lt;/span&gt;
&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;To fix this we need to modify &lt;code&gt;img_popup.rb&lt;/code&gt; (original at &lt;a href=&#34;https://github.com/ctdk/octopress-image-popup/blob/master/plugins/img_popup.rb&#34; target=&#34;_blank&#34;&gt;https://github.com/ctdk/octopress-image-popup/blob/master/plugins/img_popup.rb&lt;/a&gt;):&lt;/p&gt;

&lt;p&gt;


    

&lt;figure class=&#34;code&#34;&gt;
  &lt;figcaption&gt;
  	&lt;span&gt;img_popup.rb&lt;/span&gt;
  &lt;/figcaption&gt;
  &lt;div class=&#34;codewrapper&#34;&gt; 
    &lt;table class=&#34;highlighttable&#34;&gt;&lt;tr&gt;&lt;td&gt;&lt;div class=&#34;linenodiv&#34; style=&#34;background-color: #f0f0f0; padding-right: 10px&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;div class=&#34;highlight&#34; style=&#34;background: #002B36&#34;&gt;&lt;pre style=&#34;line-height: 125%&#34;&gt;...
vars = {
  &amp;#39;id&amp;#39;      =&amp;gt; @@id.to_s,
  &amp;#39;image&amp;#39;   =&amp;gt; @path,
  &amp;#39;title&amp;#39;   =&amp;gt; @title
}
 
...
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
  &lt;/div&gt;
&lt;/figure&gt;
&lt;/p&gt;

&lt;p&gt;We can see &lt;code&gt;title&lt;/code&gt; saved in &lt;code&gt;vars[&#39;title&#39;]&lt;/code&gt;. So we can just add a space to the end of it using the following line:&lt;br /&gt;
&lt;code&gt;vars[&#39;title&#39;] += &amp;quot; &amp;quot;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;And that&amp;rsquo;s it, it works as you can see in this post. Modified code is at: &lt;a href=&#34;https://bitbucket.org/parsiya/octopress-image-popup-forked&#34; target=&#34;_blank&#34;&gt;https://bitbucket.org/parsiya/octopress-image-popup-forked&lt;/a&gt;. I hope I did not mess up the licensing and such :).&lt;/p&gt;

&lt;p&gt;Update August 1, 2015: The tag adds this annoying extra line(s) before the image on the page. I have not had time to look into removing it. To be honest I do not like it that much. I will be using the image caption tag if the image is big enough to not need a pop-up.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>